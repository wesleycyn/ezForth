###############################################################################
#                                                                             #
# IAR ANSI C/C++ Compiler V5.20.0.50892/W32 for ARM     07/Oct/2009  13:03:55 #
# Copyright 1999-2008 IAR Systems AB.                                         #
#                                                                             #
#    Cpu mode     =  thumb                                                    #
#    Endian       =  little                                                   #
#    Source file  =  F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\library\src\stm32f #
#                    10x_dma.c                                                #
#    Command line =  F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\library\src\stm32f #
#                    10x_dma.c -D VECT_TAB_FLASH -lC                          #
#                    F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\STM3210E-EVAL\List #
#                    \ -o F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\STM3210E-EVAL #
#                    \Obj\ --debug --endian=little --cpu=Cortex-M3 -e         #
#                    --char_is_signed --require_prototypes --fpu=None         #
#                    --dlib_config "C:\Program Files\IAR Systems\Embedded     #
#                    Workbench 5.0\ARM\INC\DLib_Config_Full.h" -I             #
#                    F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\ -I                #
#                    F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\library\inc\ -I    #
#                    "C:\Program Files\IAR Systems\Embedded Workbench         #
#                    5.0\ARM\INC\" -Ohz                                       #
#    List file    =  F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\STM3210E-EVAL\List #
#                    \stm32f10x_dma.lst                                       #
#    Object file  =  F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\STM3210E-EVAL\Obj\ #
#                    stm32f10x_dma.o                                          #
#                                                                             #
#                                                                             #
###############################################################################

F:\CoLtd\Forth\MCU\STM32F10x\ST_Forth\library\src\stm32f10x_dma.c
      1          /******************** (C) COPYRIGHT 2008 STMicroelectronics ********************
      2          * File Name          : stm32f10x_dma.c
      3          * Author             : MCD Application Team
      4          * Version            : V2.0.3
      5          * Date               : 09/22/2008
      6          * Description        : This file provides all the DMA firmware functions.
      7          ********************************************************************************
      8          * THE PRESENT FIRMWARE WHICH IS FOR GUIDANCE ONLY AIMS AT PROVIDING CUSTOMERS
      9          * WITH CODING INFORMATION REGARDING THEIR PRODUCTS IN ORDER FOR THEM TO SAVE TIME.
     10          * AS A RESULT, STMICROELECTRONICS SHALL NOT BE HELD LIABLE FOR ANY DIRECT,
     11          * INDIRECT OR CONSEQUENTIAL DAMAGES WITH RESPECT TO ANY CLAIMS ARISING FROM THE
     12          * CONTENT OF SUCH FIRMWARE AND/OR THE USE MADE BY CUSTOMERS OF THE CODING
     13          * INFORMATION CONTAINED HEREIN IN CONNECTION WITH THEIR PRODUCTS.
     14          *******************************************************************************/
     15          
     16          /* Includes ------------------------------------------------------------------*/
     17          #include "stm32f10x_dma.h"
     18          #include "stm32f10x_rcc.h"
     19          
     20          /* Private typedef -----------------------------------------------------------*/
     21          /* Private define ------------------------------------------------------------*/
     22          /* DMA ENABLE mask */
     23          #define CCR_ENABLE_Set          ((u32)0x00000001)
     24          #define CCR_ENABLE_Reset        ((u32)0xFFFFFFFE)
     25          
     26          /* DMA1 Channelx interrupt pending bit masks */
     27          #define DMA1_Channel1_IT_Mask    ((u32)0x0000000F)
     28          #define DMA1_Channel2_IT_Mask    ((u32)0x000000F0)
     29          #define DMA1_Channel3_IT_Mask    ((u32)0x00000F00)
     30          #define DMA1_Channel4_IT_Mask    ((u32)0x0000F000)
     31          #define DMA1_Channel5_IT_Mask    ((u32)0x000F0000)
     32          #define DMA1_Channel6_IT_Mask    ((u32)0x00F00000)
     33          #define DMA1_Channel7_IT_Mask    ((u32)0x0F000000)
     34          
     35          /* DMA2 Channelx interrupt pending bit masks */
     36          #define DMA2_Channel1_IT_Mask    ((u32)0x0000000F)
     37          #define DMA2_Channel2_IT_Mask    ((u32)0x000000F0)
     38          #define DMA2_Channel3_IT_Mask    ((u32)0x00000F00)
     39          #define DMA2_Channel4_IT_Mask    ((u32)0x0000F000)
     40          #define DMA2_Channel5_IT_Mask    ((u32)0x000F0000)
     41          
     42          /* DMA2 FLAG mask */
     43          #define FLAG_Mask                ((u32)0x10000000)
     44          
     45          /* DMA registers Masks */
     46          #define CCR_CLEAR_Mask           ((u32)0xFFFF800F)
     47          
     48          /* Private macro -------------------------------------------------------------*/
     49          /* Private variables ---------------------------------------------------------*/
     50          /* Private function prototypes -----------------------------------------------*/
     51          /* Private functions ---------------------------------------------------------*/
     52          
     53          /*******************************************************************************
     54          * Function Name  : DMA_DeInit
     55          * Description    : Deinitializes the DMAy Channelx registers to their default reset
     56          *                  values.
     57          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and
     58          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
     59          *                    DMA Channel.
     60          * Output         : None
     61          * Return         : None
     62          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
     63          void DMA_DeInit(DMA_Channel_TypeDef* DMAy_Channelx)
     64          {
     65            /* Check the parameters */
     66            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
     67          
     68            /* Disable the selected DMAy Channelx */
     69            DMAy_Channelx->CCR &= CCR_ENABLE_Reset;
   \                     DMA_DeInit:
   \   00000000   0168               LDR      R1,[R0, #+0]
   \   00000002   0122               MOVS     R2,#+1
   \   00000004   9143               BICS     R1,R1,R2
   \   00000006   0160               STR      R1,[R0, #+0]
     70          
     71            /* Reset DMAy Channelx control register */
     72            DMAy_Channelx->CCR  = 0;
   \   00000008   0021               MOVS     R1,#+0
   \   0000000A   0160               STR      R1,[R0, #+0]
     73            
     74            /* Reset DMAy Channelx remaining bytes register */
     75            DMAy_Channelx->CNDTR = 0;
   \   0000000C   4160               STR      R1,[R0, #+4]
     76            
     77            /* Reset DMAy Channelx peripheral address register */
     78            DMAy_Channelx->CPAR  = 0;
   \   0000000E   8160               STR      R1,[R0, #+8]
     79            
     80            /* Reset DMAy Channelx memory address register */
     81            DMAy_Channelx->CMAR = 0;
   \   00000010   C160               STR      R1,[R0, #+12]
     82          
     83            switch (*(u32*)&DMAy_Channelx)
   \   00000012   ....               LDR.N    R1,??DataTable8  ;; 0x40020004
   \   00000014   ....               LDR.N    R2,??DataTable9  ;; 0x40020404
   \   00000016   284B               LDR.N    R3,??DMA_DeInit_0  ;; 0x40020008
   \   00000018   C01A               SUBS     R0,R0,R3
   \   0000001A   1CD0               BEQ.N    ??DMA_DeInit_1
   \   0000001C   1438               SUBS     R0,R0,#+20
   \   0000001E   1FD0               BEQ.N    ??DMA_DeInit_2
   \   00000020   1438               SUBS     R0,R0,#+20
   \   00000022   21D0               BEQ.N    ??DMA_DeInit_3
   \   00000024   1438               SUBS     R0,R0,#+20
   \   00000026   24D0               BEQ.N    ??DMA_DeInit_4
   \   00000028   1438               SUBS     R0,R0,#+20
   \   0000002A   26D0               BEQ.N    ??DMA_DeInit_5
   \   0000002C   1438               SUBS     R0,R0,#+20
   \   0000002E   28D0               BEQ.N    ??DMA_DeInit_6
   \   00000030   1438               SUBS     R0,R0,#+20
   \   00000032   2AD0               BEQ.N    ??DMA_DeInit_7
   \   00000034   4FF46273           MOV      R3,#+904
   \   00000038   C01A               SUBS     R0,R0,R3
   \   0000003A   2BD0               BEQ.N    ??DMA_DeInit_8
   \   0000003C   1438               SUBS     R0,R0,#+20
   \   0000003E   2DD0               BEQ.N    ??DMA_DeInit_9
   \   00000040   1438               SUBS     R0,R0,#+20
   \   00000042   2FD0               BEQ.N    ??DMA_DeInit_10
   \   00000044   1438               SUBS     R0,R0,#+20
   \   00000046   31D0               BEQ.N    ??DMA_DeInit_11
   \   00000048   1438               SUBS     R0,R0,#+20
   \   0000004A   02BF               ITTT     EQ 
   \   0000004C   1068               LDREQ    R0,[R2, #+0]
   \   0000004E   40F47020           ORREQ    R0,R0,#0xF0000
   \   00000052   1060               STREQ    R0,[R2, #+0]
   \   00000054   7047               BX       LR
     84            {
     85              case DMA1_Channel1_BASE:
     86                /* Reset interrupt pending bits for DMA1 Channel1 */
     87                DMA1->IFCR |= DMA1_Channel1_IT_Mask;
   \                     ??DMA_DeInit_1:
   \   00000056   0868               LDR      R0,[R1, #+0]
   \   00000058   40F00F00           ORR      R0,R0,#0xF
   \                     ??DMA_DeInit_12:
   \   0000005C   0860               STR      R0,[R1, #+0]
   \   0000005E   7047               BX       LR
     88                break;
     89          
     90              case DMA1_Channel2_BASE:
     91                /* Reset interrupt pending bits for DMA1 Channel2 */
     92                DMA1->IFCR |= DMA1_Channel2_IT_Mask;
   \                     ??DMA_DeInit_2:
   \   00000060   0868               LDR      R0,[R1, #+0]
   \   00000062   40F0F000           ORR      R0,R0,#0xF0
   \   00000066   F9E7               B.N      ??DMA_DeInit_12
     93                break;
     94          
     95              case DMA1_Channel3_BASE:
     96                /* Reset interrupt pending bits for DMA1 Channel3 */
     97                DMA1->IFCR |= DMA1_Channel3_IT_Mask;
   \                     ??DMA_DeInit_3:
   \   00000068   0868               LDR      R0,[R1, #+0]
   \   0000006A   40F47060           ORR      R0,R0,#0xF00
   \                     ??DMA_DeInit_13:
   \   0000006E   0860               STR      R0,[R1, #+0]
   \   00000070   7047               BX       LR
     98                break;
     99          
    100              case DMA1_Channel4_BASE:
    101                /* Reset interrupt pending bits for DMA1 Channel4 */
    102                DMA1->IFCR |= DMA1_Channel4_IT_Mask;
   \                     ??DMA_DeInit_4:
   \   00000072   0868               LDR      R0,[R1, #+0]
   \   00000074   40F47040           ORR      R0,R0,#0xF000
   \   00000078   F0E7               B.N      ??DMA_DeInit_12
    103                break;
    104          
    105              case DMA1_Channel5_BASE:
    106                /* Reset interrupt pending bits for DMA1 Channel5 */
    107                DMA1->IFCR |= DMA1_Channel5_IT_Mask;
   \                     ??DMA_DeInit_5:
   \   0000007A   0868               LDR      R0,[R1, #+0]
   \   0000007C   40F47020           ORR      R0,R0,#0xF0000
   \   00000080   F5E7               B.N      ??DMA_DeInit_13
    108                break;
    109          
    110              case DMA1_Channel6_BASE:
    111                /* Reset interrupt pending bits for DMA1 Channel6 */
    112                DMA1->IFCR |= DMA1_Channel6_IT_Mask;
   \                     ??DMA_DeInit_6:
   \   00000082   0868               LDR      R0,[R1, #+0]
   \   00000084   40F47000           ORR      R0,R0,#0xF00000
   \   00000088   E8E7               B.N      ??DMA_DeInit_12
    113                break;
    114          
    115              case DMA1_Channel7_BASE:
    116                /* Reset interrupt pending bits for DMA1 Channel7 */
    117                DMA1->IFCR |= DMA1_Channel7_IT_Mask;
   \                     ??DMA_DeInit_7:
   \   0000008A   0868               LDR      R0,[R1, #+0]
   \   0000008C   40F07060           ORR      R0,R0,#0xF000000
   \   00000090   0860               STR      R0,[R1, #+0]
   \   00000092   7047               BX       LR
    118                break;
    119          
    120              case DMA2_Channel1_BASE:
    121                /* Reset interrupt pending bits for DMA2 Channel1 */
    122                DMA2->IFCR |= DMA2_Channel1_IT_Mask;
   \                     ??DMA_DeInit_8:
   \   00000094   1068               LDR      R0,[R2, #+0]
   \   00000096   40F00F00           ORR      R0,R0,#0xF
   \   0000009A   0AE0               B.N      ??DMA_DeInit_14
    123                break;
    124          
    125              case DMA2_Channel2_BASE:
    126                /* Reset interrupt pending bits for DMA2 Channel2 */
    127                DMA2->IFCR |= DMA2_Channel2_IT_Mask;
   \                     ??DMA_DeInit_9:
   \   0000009C   1068               LDR      R0,[R2, #+0]
   \   0000009E   40F0F000           ORR      R0,R0,#0xF0
   \   000000A2   06E0               B.N      ??DMA_DeInit_14
    128                break;
    129          
    130              case DMA2_Channel3_BASE:
    131                /* Reset interrupt pending bits for DMA2 Channel3 */
    132                DMA2->IFCR |= DMA2_Channel3_IT_Mask;
   \                     ??DMA_DeInit_10:
   \   000000A4   1068               LDR      R0,[R2, #+0]
   \   000000A6   40F47060           ORR      R0,R0,#0xF00
   \   000000AA   02E0               B.N      ??DMA_DeInit_14
    133                break;
    134          
    135              case DMA2_Channel4_BASE:
    136                /* Reset interrupt pending bits for DMA2 Channel4 */
    137                DMA2->IFCR |= DMA2_Channel4_IT_Mask;
   \                     ??DMA_DeInit_11:
   \   000000AC   1068               LDR      R0,[R2, #+0]
   \   000000AE   40F47040           ORR      R0,R0,#0xF000
   \                     ??DMA_DeInit_14:
   \   000000B2   1060               STR      R0,[R2, #+0]
    138                break;
    139          
    140              case DMA2_Channel5_BASE:
    141                /* Reset interrupt pending bits for DMA2 Channel5 */
    142                DMA2->IFCR |= DMA2_Channel5_IT_Mask;
    143                break;
    144                
    145              default:
    146                break;
    147            }
    148          }
   \                     ??DMA_DeInit_15:
   \   000000B4   7047               BX       LR               ;; return
   \   000000B6   00BF               Nop      
   \                     ??DMA_DeInit_0:
   \   000000B8   08000240           DC32     0x40020008
    149          
    150          /*******************************************************************************
    151          * Function Name  : DMA_Init
    152          * Description    : Initializes the DMAy Channelx according to the specified
    153          *                  parameters in the DMA_InitStruct.
    154          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    155          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    156          *                    DMA Channel.
    157          *                  - DMA_InitStruct: pointer to a DMA_InitTypeDef structure that
    158          *                    contains the configuration information for the specified
    159          *                    DMA Channel.
    160          * Output         : None
    161          * Return         : None
    162          ******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    163          void DMA_Init(DMA_Channel_TypeDef* DMAy_Channelx, DMA_InitTypeDef* DMA_InitStruct)
    164          {
    165            u32 tmpreg = 0;
    166          
    167            /* Check the parameters */
    168            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    169            assert_param(IS_DMA_DIR(DMA_InitStruct->DMA_DIR));
    170            assert_param(IS_DMA_BUFFER_SIZE(DMA_InitStruct->DMA_BufferSize));
    171            assert_param(IS_DMA_PERIPHERAL_INC_STATE(DMA_InitStruct->DMA_PeripheralInc));
    172            assert_param(IS_DMA_MEMORY_INC_STATE(DMA_InitStruct->DMA_MemoryInc));   
    173            assert_param(IS_DMA_PERIPHERAL_DATA_SIZE(DMA_InitStruct->DMA_PeripheralDataSize));
    174            assert_param(IS_DMA_MEMORY_DATA_SIZE(DMA_InitStruct->DMA_MemoryDataSize));
    175            assert_param(IS_DMA_MODE(DMA_InitStruct->DMA_Mode));
    176            assert_param(IS_DMA_PRIORITY(DMA_InitStruct->DMA_Priority));
    177            assert_param(IS_DMA_M2M_STATE(DMA_InitStruct->DMA_M2M));
    178          
    179          /*--------------------------- DMAy Channelx CCR Configuration -----------------*/
    180            /* Get the DMAy_Channelx CCR value */
    181            tmpreg = DMAy_Channelx->CCR;
   \                     DMA_Init:
   \   00000000   0268               LDR      R2,[R0, #+0]
    182            /* Clear MEM2MEM, PL, MSIZE, PSIZE, MINC, PINC, CIRC and DIR bits */
    183            tmpreg &= CCR_CLEAR_Mask;
    184            /* Configure DMAy Channelx: data transfer, data size, priority level and mode */
    185            /* Set DIR bit according to DMA_DIR value */
    186            /* Set CIRC bit according to DMA_Mode value */
    187            /* Set PINC bit according to DMA_PeripheralInc value */
    188            /* Set MINC bit according to DMA_MemoryInc value */
    189            /* Set PSIZE bits according to DMA_PeripheralDataSize value */
    190            /* Set MSIZE bits according to DMA_MemoryDataSize value */
    191            /* Set PL bits according to DMA_Priority value */
    192            /* Set the MEM2MEM bit according to DMA_M2M value */
    193            tmpreg |= DMA_InitStruct->DMA_DIR | DMA_InitStruct->DMA_Mode |
    194                      DMA_InitStruct->DMA_PeripheralInc | DMA_InitStruct->DMA_MemoryInc |
    195                      DMA_InitStruct->DMA_PeripheralDataSize | DMA_InitStruct->DMA_MemoryDataSize |
    196                      DMA_InitStruct->DMA_Priority | DMA_InitStruct->DMA_M2M;
    197            /* Write to DMAy Channelx CCR */
    198            DMAy_Channelx->CCR = tmpreg;
   \   00000002   0D4B               LDR.N    R3,??DMA_Init_0  ;; 0xffff800f
   \   00000004   1A40               ANDS     R2,R3,R2
   \   00000006   8B68               LDR      R3,[R1, #+8]
   \   00000008   1A43               ORRS     R2,R3,R2
   \   0000000A   0B6A               LDR      R3,[R1, #+32]
   \   0000000C   1A43               ORRS     R2,R3,R2
   \   0000000E   0B69               LDR      R3,[R1, #+16]
   \   00000010   1A43               ORRS     R2,R3,R2
   \   00000012   4B69               LDR      R3,[R1, #+20]
   \   00000014   1A43               ORRS     R2,R3,R2
   \   00000016   8B69               LDR      R3,[R1, #+24]
   \   00000018   1A43               ORRS     R2,R3,R2
   \   0000001A   CB69               LDR      R3,[R1, #+28]
   \   0000001C   1A43               ORRS     R2,R3,R2
   \   0000001E   4B6A               LDR      R3,[R1, #+36]
   \   00000020   1A43               ORRS     R2,R3,R2
   \   00000022   8B6A               LDR      R3,[R1, #+40]
   \   00000024   1A43               ORRS     R2,R3,R2
   \   00000026   0260               STR      R2,[R0, #+0]
    199          
    200          /*--------------------------- DMAy Channelx CNDTR Configuration ---------------*/
    201            /* Write to DMAy Channelx CNDTR */
    202            DMAy_Channelx->CNDTR = DMA_InitStruct->DMA_BufferSize;
   \   00000028   CA68               LDR      R2,[R1, #+12]
   \   0000002A   4260               STR      R2,[R0, #+4]
    203          
    204          /*--------------------------- DMAy Channelx CPAR Configuration ----------------*/
    205            /* Write to DMAy Channelx CPAR */
    206            DMAy_Channelx->CPAR = DMA_InitStruct->DMA_PeripheralBaseAddr;
   \   0000002C   0A68               LDR      R2,[R1, #+0]
   \   0000002E   8260               STR      R2,[R0, #+8]
    207          
    208          /*--------------------------- DMAy Channelx CMAR Configuration ----------------*/
    209            /* Write to DMAy Channelx CMAR */
    210            DMAy_Channelx->CMAR = DMA_InitStruct->DMA_MemoryBaseAddr;
   \   00000030   4968               LDR      R1,[R1, #+4]
   \   00000032   C160               STR      R1,[R0, #+12]
    211          }
   \   00000034   7047               BX       LR               ;; return
   \   00000036   00BF               Nop      
   \                     ??DMA_Init_0:
   \   00000038   0F80FFFF           DC32     0xffff800f
    212          
    213          /*******************************************************************************
    214          * Function Name  : DMA_StructInit
    215          * Description    : Fills each DMA_InitStruct member with its default value.
    216          * Input          : - DMA_InitStruct : pointer to a DMA_InitTypeDef structure
    217          *                    which will be initialized.
    218          * Output         : None
    219          * Return         : None
    220          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    221          void DMA_StructInit(DMA_InitTypeDef* DMA_InitStruct)
    222          {
    223          /*-------------- Reset DMA init structure parameters values ------------------*/
    224            /* Initialize the DMA_PeripheralBaseAddr member */
    225            DMA_InitStruct->DMA_PeripheralBaseAddr = 0;
   \                     DMA_StructInit:
   \   00000000   0021               MOVS     R1,#+0
   \   00000002   0160               STR      R1,[R0, #+0]
    226          
    227            /* Initialize the DMA_MemoryBaseAddr member */
    228            DMA_InitStruct->DMA_MemoryBaseAddr = 0;
   \   00000004   4160               STR      R1,[R0, #+4]
    229          
    230            /* Initialize the DMA_DIR member */
    231            DMA_InitStruct->DMA_DIR = DMA_DIR_PeripheralSRC;
   \   00000006   8160               STR      R1,[R0, #+8]
    232          
    233            /* Initialize the DMA_BufferSize member */
    234            DMA_InitStruct->DMA_BufferSize = 0;
   \   00000008   C160               STR      R1,[R0, #+12]
    235          
    236            /* Initialize the DMA_PeripheralInc member */
    237            DMA_InitStruct->DMA_PeripheralInc = DMA_PeripheralInc_Disable;
   \   0000000A   0161               STR      R1,[R0, #+16]
    238          
    239            /* Initialize the DMA_MemoryInc member */
    240            DMA_InitStruct->DMA_MemoryInc = DMA_MemoryInc_Disable;
   \   0000000C   4161               STR      R1,[R0, #+20]
    241          
    242            /* Initialize the DMA_PeripheralDataSize member */
    243            DMA_InitStruct->DMA_PeripheralDataSize = DMA_PeripheralDataSize_Byte;
   \   0000000E   8161               STR      R1,[R0, #+24]
    244          
    245            /* Initialize the DMA_MemoryDataSize member */
    246            DMA_InitStruct->DMA_MemoryDataSize = DMA_MemoryDataSize_Byte;
   \   00000010   C161               STR      R1,[R0, #+28]
    247          
    248            /* Initialize the DMA_Mode member */
    249            DMA_InitStruct->DMA_Mode = DMA_Mode_Normal;
   \   00000012   0162               STR      R1,[R0, #+32]
    250          
    251            /* Initialize the DMA_Priority member */
    252            DMA_InitStruct->DMA_Priority = DMA_Priority_Low;
   \   00000014   4162               STR      R1,[R0, #+36]
    253          
    254            /* Initialize the DMA_M2M member */
    255            DMA_InitStruct->DMA_M2M = DMA_M2M_Disable;
   \   00000016   8162               STR      R1,[R0, #+40]
    256          }
   \   00000018   7047               BX       LR               ;; return
    257          
    258          /*******************************************************************************
    259          * Function Name  : DMA_Cmd
    260          * Description    : Enables or disables the specified DMAy Channelx.
    261          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    262          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    263          *                    DMA Channel.
    264          *                  - NewState: new state of the DMAy Channelx. 
    265          *                    This parameter can be: ENABLE or DISABLE.
    266          * Output         : None
    267          * Return         : None
    268          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    269          void DMA_Cmd(DMA_Channel_TypeDef* DMAy_Channelx, FunctionalState NewState)
    270          {
    271            /* Check the parameters */
    272            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    273            assert_param(IS_FUNCTIONAL_STATE(NewState));
    274          
    275            if (NewState != DISABLE)
   \                     DMA_Cmd:
   \   00000000   0029               CMP      R1,#+0
   \   00000002   0168               LDR      R1,[R0, #+0]
   \   00000004   02D0               BEQ.N    ??DMA_Cmd_0
    276            {
    277              /* Enable the selected DMAy Channelx */
    278              DMAy_Channelx->CCR |= CCR_ENABLE_Set;
   \   00000006   41F00101           ORR      R1,R1,#0x1
   \   0000000A   01E0               B.N      ??DMA_Cmd_1
    279            }
    280            else
    281            {
    282              /* Disable the selected DMAy Channelx */
    283              DMAy_Channelx->CCR &= CCR_ENABLE_Reset;
   \                     ??DMA_Cmd_0:
   \   0000000C   0122               MOVS     R2,#+1
   \   0000000E   9143               BICS     R1,R1,R2
   \                     ??DMA_Cmd_1:
   \   00000010   0160               STR      R1,[R0, #+0]
    284            }
    285          }
   \   00000012   7047               BX       LR               ;; return
    286          
    287          /*******************************************************************************
    288          * Function Name  : DMA_ITConfig
    289          * Description    : Enables or disables the specified DMAy Channelx interrupts.
    290          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    291          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    292          *                    DMA Channel.
    293          *                  - DMA_IT: specifies the DMA interrupts sources to be enabled
    294          *                    or disabled. 
    295          *                    This parameter can be any combination of the following values:
    296          *                       - DMA_IT_TC:  Transfer complete interrupt mask
    297          *                       - DMA_IT_HT:  Half transfer interrupt mask
    298          *                       - DMA_IT_TE:  Transfer error interrupt mask
    299          *                  - NewState: new state of the specified DMA interrupts.
    300          *                    This parameter can be: ENABLE or DISABLE.
    301          * Output         : None
    302          * Return         : None
    303          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    304          void DMA_ITConfig(DMA_Channel_TypeDef* DMAy_Channelx, u32 DMA_IT, FunctionalState NewState)
    305          {
    306            /* Check the parameters */
    307            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    308            assert_param(IS_DMA_CONFIG_IT(DMA_IT));
    309            assert_param(IS_FUNCTIONAL_STATE(NewState));
    310          
    311            if (NewState != DISABLE)
   \                     DMA_ITConfig:
   \   00000000   002A               CMP      R2,#+0
   \   00000002   0268               LDR      R2,[R0, #+0]
   \   00000004   01D0               BEQ.N    ??DMA_ITConfig_0
    312            {
    313              /* Enable the selected DMA interrupts */
    314              DMAy_Channelx->CCR |= DMA_IT;
   \   00000006   1143               ORRS     R1,R1,R2
   \   00000008   01E0               B.N      ??DMA_ITConfig_1
    315            }
    316            else
    317            {
    318              /* Disable the selected DMA interrupts */
    319              DMAy_Channelx->CCR &= ~DMA_IT;
   \                     ??DMA_ITConfig_0:
   \   0000000A   C943               MVNS     R1,R1
   \   0000000C   1140               ANDS     R1,R1,R2
   \                     ??DMA_ITConfig_1:
   \   0000000E   0160               STR      R1,[R0, #+0]
    320            }
    321          }
   \   00000010   7047               BX       LR               ;; return
    322          
    323          /*******************************************************************************
    324          * Function Name  : DMA_GetCurrDataCounter
    325          * Description    : Returns the number of remaining data units in the current
    326          *                  DMAy Channelx transfer.
    327          * Input          : - DMAy_Channelx: where y can be 1 or 2 to select the DMA and 
    328          *                    x can be 1 to 7 for DMA1 and 1 to 5 for DMA2 to select the 
    329          *                    DMA Channel.
    330          * Output         : None
    331          * Return         : The number of remaining data units in the current DMAy Channelx
    332          *                  transfer.
    333          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    334          u16 DMA_GetCurrDataCounter(DMA_Channel_TypeDef* DMAy_Channelx)
    335          {
    336            /* Check the parameters */
    337            assert_param(IS_DMA_ALL_PERIPH(DMAy_Channelx));
    338          
    339            /* Return the number of remaining data units for DMAy Channelx */
    340            return ((u16)(DMAy_Channelx->CNDTR));
   \                     DMA_GetCurrDataCounter:
   \   00000000   4068               LDR      R0,[R0, #+4]
   \   00000002   80B2               UXTH     R0,R0
   \   00000004   7047               BX       LR               ;; return
    341          }
    342          
    343          /*******************************************************************************
    344          * Function Name  : DMA_GetFlagStatus
    345          * Description    : Checks whether the specified DMAy Channelx flag is set or not.
    346          * Input          : - DMA_FLAG: specifies the flag to check.
    347          *                    This parameter can be one of the following values:
    348          *                       - DMA1_FLAG_GL1: DMA1 Channel1 global flag.
    349          *                       - DMA1_FLAG_TC1: DMA1 Channel1 transfer complete flag.
    350          *                       - DMA1_FLAG_HT1: DMA1 Channel1 half transfer flag.
    351          *                       - DMA1_FLAG_TE1: DMA1 Channel1 transfer error flag.
    352          *                       - DMA1_FLAG_GL2: DMA1 Channel2 global flag.
    353          *                       - DMA1_FLAG_TC2: DMA1 Channel2 transfer complete flag.
    354          *                       - DMA1_FLAG_HT2: DMA1 Channel2 half transfer flag.
    355          *                       - DMA1_FLAG_TE2: DMA1 Channel2 transfer error flag.
    356          *                       - DMA1_FLAG_GL3: DMA1 Channel3 global flag.
    357          *                       - DMA1_FLAG_TC3: DMA1 Channel3 transfer complete flag.
    358          *                       - DMA1_FLAG_HT3: DMA1 Channel3 half transfer flag.
    359          *                       - DMA1_FLAG_TE3: DMA1 Channel3 transfer error flag.
    360          *                       - DMA1_FLAG_GL4: DMA1 Channel4 global flag.
    361          *                       - DMA1_FLAG_TC4: DMA1 Channel4 transfer complete flag.
    362          *                       - DMA1_FLAG_HT4: DMA1 Channel4 half transfer flag.
    363          *                       - DMA1_FLAG_TE4: DMA1 Channel4 transfer error flag.
    364          *                       - DMA1_FLAG_GL5: DMA1 Channel5 global flag.
    365          *                       - DMA1_FLAG_TC5: DMA1 Channel5 transfer complete flag.
    366          *                       - DMA1_FLAG_HT5: DMA1 Channel5 half transfer flag.
    367          *                       - DMA1_FLAG_TE5: DMA1 Channel5 transfer error flag.
    368          *                       - DMA1_FLAG_GL6: DMA1 Channel6 global flag.
    369          *                       - DMA1_FLAG_TC6: DMA1 Channel6 transfer complete flag.
    370          *                       - DMA1_FLAG_HT6: DMA1 Channel6 half transfer flag.
    371          *                       - DMA1_FLAG_TE6: DMA1 Channel6 transfer error flag.
    372          *                       - DMA1_FLAG_GL7: DMA1 Channel7 global flag.
    373          *                       - DMA1_FLAG_TC7: DMA1 Channel7 transfer complete flag.
    374          *                       - DMA1_FLAG_HT7: DMA1 Channel7 half transfer flag.
    375          *                       - DMA1_FLAG_TE7: DMA1 Channel7 transfer error flag.
    376          *                       - DMA2_FLAG_GL1: DMA2 Channel1 global flag.
    377          *                       - DMA2_FLAG_TC1: DMA2 Channel1 transfer complete flag.
    378          *                       - DMA2_FLAG_HT1: DMA2 Channel1 half transfer flag.
    379          *                       - DMA2_FLAG_TE1: DMA2 Channel1 transfer error flag.
    380          *                       - DMA2_FLAG_GL2: DMA2 Channel2 global flag.
    381          *                       - DMA2_FLAG_TC2: DMA2 Channel2 transfer complete flag.
    382          *                       - DMA2_FLAG_HT2: DMA2 Channel2 half transfer flag.
    383          *                       - DMA2_FLAG_TE2: DMA2 Channel2 transfer error flag.
    384          *                       - DMA2_FLAG_GL3: DMA2 Channel3 global flag.
    385          *                       - DMA2_FLAG_TC3: DMA2 Channel3 transfer complete flag.
    386          *                       - DMA2_FLAG_HT3: DMA2 Channel3 half transfer flag.
    387          *                       - DMA2_FLAG_TE3: DMA2 Channel3 transfer error flag.
    388          *                       - DMA2_FLAG_GL4: DMA2 Channel4 global flag.
    389          *                       - DMA2_FLAG_TC4: DMA2 Channel4 transfer complete flag.
    390          *                       - DMA2_FLAG_HT4: DMA2 Channel4 half transfer flag.
    391          *                       - DMA2_FLAG_TE4: DMA2 Channel4 transfer error flag.
    392          *                       - DMA2_FLAG_GL5: DMA2 Channel5 global flag.
    393          *                       - DMA2_FLAG_TC5: DMA2 Channel5 transfer complete flag.
    394          *                       - DMA2_FLAG_HT5: DMA2 Channel5 half transfer flag.
    395          *                       - DMA2_FLAG_TE5: DMA2 Channel5 transfer error flag.
    396          * Output         : None
    397          * Return         : The new state of DMA_FLAG (SET or RESET).
    398          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    399          FlagStatus DMA_GetFlagStatus(u32 DMA_FLAG)
    400          {
    401            FlagStatus bitstatus = RESET;
    402            u32 tmpreg = 0;
    403          
    404            /* Check the parameters */
    405            assert_param(IS_DMA_GET_FLAG(DMA_FLAG));
    406          
    407            /* Calculate the used DMA */
    408            if ((DMA_FLAG & FLAG_Mask) != (u32)RESET)
   \                     DMA_GetFlagStatus:
   \   00000000   10F0805F           TST      R0,#0x10000000
   \   00000004   07BF               ITTEE    EQ 
   \   00000006   ....               LDREQ.N  R1,??DataTable6  ;; 0x40020000
   \   00000008   0968               LDREQ    R1,[R1, #+0]
    409            {
    410              /* Get DMA2 ISR register value */
    411              tmpreg = DMA2->ISR ;
   \   0000000A   ....               LDRNE.N  R1,??DataTable7  ;; 0x40020400
   \   0000000C   0968               LDRNE    R1,[R1, #+0]
    412            }
    413            else
    414            {
    415              /* Get DMA1 ISR register value */
    416              tmpreg = DMA1->ISR ;
    417            }
    418          
    419            /* Check the status of the specified DMA flag */
    420            if ((tmpreg & DMA_FLAG) != (u32)RESET)
   \   0000000E   0840               ANDS     R0,R0,R1
   \   00000010   18BF               IT       NE 
   \   00000012   0120               MOVNE    R0,#+1
    421            {
    422              /* DMA_FLAG is set */
    423              bitstatus = SET;
    424            }
    425            else
    426            {
    427              /* DMA_FLAG is reset */
    428              bitstatus = RESET;
    429            }
    430            
    431            /* Return the DMA_FLAG status */
    432            return  bitstatus;
   \   00000014   40B2               SXTB     R0,R0
   \   00000016   7047               BX       LR               ;; return
    433          }
    434          
    435          /*******************************************************************************
    436          * Function Name  : DMA_ClearFlag
    437          * Description    : Clears the DMAy Channelx's pending flags.
    438          * Input          : - DMA_FLAG: specifies the flag to clear.
    439          *                    This parameter can be any combination (for the same DMA) of 
    440          *                    the following values:
    441          *                       - DMA1_FLAG_GL1: DMA1 Channel1 global flag.
    442          *                       - DMA1_FLAG_TC1: DMA1 Channel1 transfer complete flag.
    443          *                       - DMA1_FLAG_HT1: DMA1 Channel1 half transfer flag.
    444          *                       - DMA1_FLAG_TE1: DMA1 Channel1 transfer error flag.
    445          *                       - DMA1_FLAG_GL2: DMA1 Channel2 global flag.
    446          *                       - DMA1_FLAG_TC2: DMA1 Channel2 transfer complete flag.
    447          *                       - DMA1_FLAG_HT2: DMA1 Channel2 half transfer flag.
    448          *                       - DMA1_FLAG_TE2: DMA1 Channel2 transfer error flag.
    449          *                       - DMA1_FLAG_GL3: DMA1 Channel3 global flag.
    450          *                       - DMA1_FLAG_TC3: DMA1 Channel3 transfer complete flag.
    451          *                       - DMA1_FLAG_HT3: DMA1 Channel3 half transfer flag.
    452          *                       - DMA1_FLAG_TE3: DMA1 Channel3 transfer error flag.
    453          *                       - DMA1_FLAG_GL4: DMA1 Channel4 global flag.
    454          *                       - DMA1_FLAG_TC4: DMA1 Channel4 transfer complete flag.
    455          *                       - DMA1_FLAG_HT4: DMA1 Channel4 half transfer flag.
    456          *                       - DMA1_FLAG_TE4: DMA1 Channel4 transfer error flag.
    457          *                       - DMA1_FLAG_GL5: DMA1 Channel5 global flag.
    458          *                       - DMA1_FLAG_TC5: DMA1 Channel5 transfer complete flag.
    459          *                       - DMA1_FLAG_HT5: DMA1 Channel5 half transfer flag.
    460          *                       - DMA1_FLAG_TE5: DMA1 Channel5 transfer error flag.
    461          *                       - DMA1_FLAG_GL6: DMA1 Channel6 global flag.
    462          *                       - DMA1_FLAG_TC6: DMA1 Channel6 transfer complete flag.
    463          *                       - DMA1_FLAG_HT6: DMA1 Channel6 half transfer flag.
    464          *                       - DMA1_FLAG_TE6: DMA1 Channel6 transfer error flag.
    465          *                       - DMA1_FLAG_GL7: DMA1 Channel7 global flag.
    466          *                       - DMA1_FLAG_TC7: DMA1 Channel7 transfer complete flag.
    467          *                       - DMA1_FLAG_HT7: DMA1 Channel7 half transfer flag.
    468          *                       - DMA1_FLAG_TE7: DMA1 Channel7 transfer error flag.
    469          *                       - DMA2_FLAG_GL1: DMA2 Channel1 global flag.
    470          *                       - DMA2_FLAG_TC1: DMA2 Channel1 transfer complete flag.
    471          *                       - DMA2_FLAG_HT1: DMA2 Channel1 half transfer flag.
    472          *                       - DMA2_FLAG_TE1: DMA2 Channel1 transfer error flag.
    473          *                       - DMA2_FLAG_GL2: DMA2 Channel2 global flag.
    474          *                       - DMA2_FLAG_TC2: DMA2 Channel2 transfer complete flag.
    475          *                       - DMA2_FLAG_HT2: DMA2 Channel2 half transfer flag.
    476          *                       - DMA2_FLAG_TE2: DMA2 Channel2 transfer error flag.
    477          *                       - DMA2_FLAG_GL3: DMA2 Channel3 global flag.
    478          *                       - DMA2_FLAG_TC3: DMA2 Channel3 transfer complete flag.
    479          *                       - DMA2_FLAG_HT3: DMA2 Channel3 half transfer flag.
    480          *                       - DMA2_FLAG_TE3: DMA2 Channel3 transfer error flag.
    481          *                       - DMA2_FLAG_GL4: DMA2 Channel4 global flag.
    482          *                       - DMA2_FLAG_TC4: DMA2 Channel4 transfer complete flag.
    483          *                       - DMA2_FLAG_HT4: DMA2 Channel4 half transfer flag.
    484          *                       - DMA2_FLAG_TE4: DMA2 Channel4 transfer error flag.
    485          *                       - DMA2_FLAG_GL5: DMA2 Channel5 global flag.
    486          *                       - DMA2_FLAG_TC5: DMA2 Channel5 transfer complete flag.
    487          *                       - DMA2_FLAG_HT5: DMA2 Channel5 half transfer flag.
    488          *                       - DMA2_FLAG_TE5: DMA2 Channel5 transfer error flag.
    489          * Output         : None
    490          * Return         : None
    491          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    492          void DMA_ClearFlag(u32 DMA_FLAG)
    493          {
    494            /* Check the parameters */
    495            assert_param(IS_DMA_CLEAR_FLAG(DMA_FLAG));
    496          
    497            /* Calculate the used DMA */
    498            if ((DMA_FLAG & FLAG_Mask) != (u32)RESET)
   \                     DMA_ClearFlag:
   \   00000000   10F0805F           TST      R0,#0x10000000
   \   00000004   07BF               ITTEE    EQ 
   \   00000006   ....               LDREQ.N  R1,??DataTable8  ;; 0x40020004
   \   00000008   0860               STREQ    R0,[R1, #+0]
    499            {
    500              /* Clear the selected DMA flags */
    501              DMA2->IFCR = DMA_FLAG;
   \   0000000A   ....               LDRNE.N  R1,??DataTable9  ;; 0x40020404
   \   0000000C   0860               STRNE    R0,[R1, #+0]
    502            }
    503            else
    504            {
    505              /* Clear the selected DMA flags */
    506              DMA1->IFCR = DMA_FLAG;
    507            }
    508          }
   \   0000000E   7047               BX       LR               ;; return
    509          
    510          /*******************************************************************************
    511          * Function Name  : DMA_GetITStatus
    512          * Description    : Checks whether the specified DMAy Channelx interrupt has 
    513          *                  occurred or not.
    514          * Input          : - DMA_IT: specifies the DMA interrupt source to check. 
    515          *                    This parameter can be one of the following values:
    516          *                       - DMA1_IT_GL1: DMA1 Channel1 global interrupt.
    517          *                       - DMA1_IT_TC1: DMA1 Channel1 transfer complete interrupt.
    518          *                       - DMA1_IT_HT1: DMA1 Channel1 half transfer interrupt.
    519          *                       - DMA1_IT_TE1: DMA1 Channel1 transfer error interrupt.
    520          *                       - DMA1_IT_GL2: DMA1 Channel2 global interrupt.
    521          *                       - DMA1_IT_TC2: DMA1 Channel2 transfer complete interrupt.
    522          *                       - DMA1_IT_HT2: DMA1 Channel2 half transfer interrupt.
    523          *                       - DMA1_IT_TE2: DMA1 Channel2 transfer error interrupt.
    524          *                       - DMA1_IT_GL3: DMA1 Channel3 global interrupt.
    525          *                       - DMA1_IT_TC3: DMA1 Channel3 transfer complete interrupt.
    526          *                       - DMA1_IT_HT3: DMA1 Channel3 half transfer interrupt.
    527          *                       - DMA1_IT_TE3: DMA1 Channel3 transfer error interrupt.
    528          *                       - DMA1_IT_GL4: DMA1 Channel4 global interrupt.
    529          *                       - DMA1_IT_TC4: DMA1 Channel4 transfer complete interrupt.
    530          *                       - DMA1_IT_HT4: DMA1 Channel4 half transfer interrupt.
    531          *                       - DMA1_IT_TE4: DMA1 Channel4 transfer error interrupt.
    532          *                       - DMA1_IT_GL5: DMA1 Channel5 global interrupt.
    533          *                       - DMA1_IT_TC5: DMA1 Channel5 transfer complete interrupt.
    534          *                       - DMA1_IT_HT5: DMA1 Channel5 half transfer interrupt.
    535          *                       - DMA1_IT_TE5: DMA1 Channel5 transfer error interrupt.
    536          *                       - DMA1_IT_GL6: DMA1 Channel6 global interrupt.
    537          *                       - DMA1_IT_TC6: DMA1 Channel6 transfer complete interrupt.
    538          *                       - DMA1_IT_HT6: DMA1 Channel6 half transfer interrupt.
    539          *                       - DMA1_IT_TE6: DMA1 Channel6 transfer error interrupt.
    540          *                       - DMA1_IT_GL7: DMA1 Channel7 global interrupt.
    541          *                       - DMA1_IT_TC7: DMA1 Channel7 transfer complete interrupt.
    542          *                       - DMA1_IT_HT7: DMA1 Channel7 half transfer interrupt.
    543          *                       - DMA1_IT_TE7: DMA1 Channel7 transfer error interrupt.
    544          *                       - DMA2_IT_GL1: DMA2 Channel1 global interrupt.
    545          *                       - DMA2_IT_TC1: DMA2 Channel1 transfer complete interrupt.
    546          *                       - DMA2_IT_HT1: DMA2 Channel1 half transfer interrupt.
    547          *                       - DMA2_IT_TE1: DMA2 Channel1 transfer error interrupt.
    548          *                       - DMA2_IT_GL2: DMA2 Channel2 global interrupt.
    549          *                       - DMA2_IT_TC2: DMA2 Channel2 transfer complete interrupt.
    550          *                       - DMA2_IT_HT2: DMA2 Channel2 half transfer interrupt.
    551          *                       - DMA2_IT_TE2: DMA2 Channel2 transfer error interrupt.
    552          *                       - DMA2_IT_GL3: DMA2 Channel3 global interrupt.
    553          *                       - DMA2_IT_TC3: DMA2 Channel3 transfer complete interrupt.
    554          *                       - DMA2_IT_HT3: DMA2 Channel3 half transfer interrupt.
    555          *                       - DMA2_IT_TE3: DMA2 Channel3 transfer error interrupt.
    556          *                       - DMA2_IT_GL4: DMA2 Channel4 global interrupt.
    557          *                       - DMA2_IT_TC4: DMA2 Channel4 transfer complete interrupt.
    558          *                       - DMA2_IT_HT4: DMA2 Channel4 half transfer interrupt.
    559          *                       - DMA2_IT_TE4: DMA2 Channel4 transfer error interrupt.
    560          *                       - DMA2_IT_GL5: DMA2 Channel5 global interrupt.
    561          *                       - DMA2_IT_TC5: DMA2 Channel5 transfer complete interrupt.
    562          *                       - DMA2_IT_HT5: DMA2 Channel5 half transfer interrupt.
    563          *                       - DMA2_IT_TE5: DMA2 Channel5 transfer error interrupt.
    564          * Output         : None
    565          * Return         : The new state of DMA_IT (SET or RESET).
    566          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    567          ITStatus DMA_GetITStatus(u32 DMA_IT)
    568          {
    569            ITStatus bitstatus = RESET;
    570            u32 tmpreg = 0;
    571          
    572            /* Check the parameters */
    573            assert_param(IS_DMA_GET_IT(DMA_IT));
    574          
    575            /* Calculate the used DMA */
    576            if ((DMA_IT & FLAG_Mask) != (u32)RESET)
   \                     DMA_GetITStatus:
   \   00000000   10F0805F           TST      R0,#0x10000000
   \   00000004   07BF               ITTEE    EQ 
   \   00000006   ....               LDREQ.N  R1,??DataTable6  ;; 0x40020000
   \   00000008   0968               LDREQ    R1,[R1, #+0]
    577            {
    578              /* Get DMA2 ISR register value */
    579              tmpreg = DMA2->ISR ;
   \   0000000A   ....               LDRNE.N  R1,??DataTable7  ;; 0x40020400
   \   0000000C   0968               LDRNE    R1,[R1, #+0]
    580            }
    581            else
    582            {
    583              /* Get DMA1 ISR register value */
    584              tmpreg = DMA1->ISR ;
    585            }
    586          
    587            /* Check the status of the specified DMA interrupt */
    588            if ((tmpreg & DMA_IT) != (u32)RESET)
   \   0000000E   0840               ANDS     R0,R0,R1
   \   00000010   18BF               IT       NE 
   \   00000012   0120               MOVNE    R0,#+1
    589            {
    590              /* DMA_IT is set */
    591              bitstatus = SET;
    592            }
    593            else
    594            {
    595              /* DMA_IT is reset */
    596              bitstatus = RESET;
    597            }
    598            /* Return the DMA_IT status */
    599            return  bitstatus;
   \   00000014   40B2               SXTB     R0,R0
   \   00000016   7047               BX       LR               ;; return
    600          }
    601          
    602          /*******************************************************************************
    603          * Function Name  : DMA_ClearITPendingBit
    604          * Description    : Clears the DMAy Channelxs interrupt pending bits.
    605          * Input          : - DMA_IT: specifies the DMA interrupt pending bit to clear.
    606          *                    This parameter can be any combination (for the same DMA) of
    607          *                    the following values:
    608          *                       - DMA1_IT_GL1: DMA1 Channel1 global interrupt.
    609          *                       - DMA1_IT_TC1: DMA1 Channel1 transfer complete interrupt.
    610          *                       - DMA1_IT_HT1: DMA1 Channel1 half transfer interrupt.
    611          *                       - DMA1_IT_TE1: DMA1 Channel1 transfer error interrupt.
    612          *                       - DMA1_IT_GL2: DMA1 Channel2 global interrupt.
    613          *                       - DMA1_IT_TC2: DMA1 Channel2 transfer complete interrupt.
    614          *                       - DMA1_IT_HT2: DMA1 Channel2 half transfer interrupt.
    615          *                       - DMA1_IT_TE2: DMA1 Channel2 transfer error interrupt.
    616          *                       - DMA1_IT_GL3: DMA1 Channel3 global interrupt.
    617          *                       - DMA1_IT_TC3: DMA1 Channel3 transfer complete interrupt.
    618          *                       - DMA1_IT_HT3: DMA1 Channel3 half transfer interrupt.
    619          *                       - DMA1_IT_TE3: DMA1 Channel3 transfer error interrupt.
    620          *                       - DMA1_IT_GL4: DMA1 Channel4 global interrupt.
    621          *                       - DMA1_IT_TC4: DMA1 Channel4 transfer complete interrupt.
    622          *                       - DMA1_IT_HT4: DMA1 Channel4 half transfer interrupt.
    623          *                       - DMA1_IT_TE4: DMA1 Channel4 transfer error interrupt.
    624          *                       - DMA1_IT_GL5: DMA1 Channel5 global interrupt.
    625          *                       - DMA1_IT_TC5: DMA1 Channel5 transfer complete interrupt.
    626          *                       - DMA1_IT_HT5: DMA1 Channel5 half transfer interrupt.
    627          *                       - DMA1_IT_TE5: DMA1 Channel5 transfer error interrupt.
    628          *                       - DMA1_IT_GL6: DMA1 Channel6 global interrupt.
    629          *                       - DMA1_IT_TC6: DMA1 Channel6 transfer complete interrupt.
    630          *                       - DMA1_IT_HT6: DMA1 Channel6 half transfer interrupt.
    631          *                       - DMA1_IT_TE6: DMA1 Channel6 transfer error interrupt.
    632          *                       - DMA1_IT_GL7: DMA1 Channel7 global interrupt.
    633          *                       - DMA1_IT_TC7: DMA1 Channel7 transfer complete interrupt.
    634          *                       - DMA1_IT_HT7: DMA1 Channel7 half transfer interrupt.
    635          *                       - DMA1_IT_TE7: DMA1 Channel7 transfer error interrupt.
    636          *                       - DMA2_IT_GL1: DMA2 Channel1 global interrupt.
    637          *                       - DMA2_IT_TC1: DMA2 Channel1 transfer complete interrupt.
    638          *                       - DMA2_IT_HT1: DMA2 Channel1 half transfer interrupt.
    639          *                       - DMA2_IT_TE1: DMA2 Channel1 transfer error interrupt.
    640          *                       - DMA2_IT_GL2: DMA2 Channel2 global interrupt.
    641          *                       - DMA2_IT_TC2: DMA2 Channel2 transfer complete interrupt.
    642          *                       - DMA2_IT_HT2: DMA2 Channel2 half transfer interrupt.
    643          *                       - DMA2_IT_TE2: DMA2 Channel2 transfer error interrupt.
    644          *                       - DMA2_IT_GL3: DMA2 Channel3 global interrupt.
    645          *                       - DMA2_IT_TC3: DMA2 Channel3 transfer complete interrupt.
    646          *                       - DMA2_IT_HT3: DMA2 Channel3 half transfer interrupt.
    647          *                       - DMA2_IT_TE3: DMA2 Channel3 transfer error interrupt.
    648          *                       - DMA2_IT_GL4: DMA2 Channel4 global interrupt.
    649          *                       - DMA2_IT_TC4: DMA2 Channel4 transfer complete interrupt.
    650          *                       - DMA2_IT_HT4: DMA2 Channel4 half transfer interrupt.
    651          *                       - DMA2_IT_TE4: DMA2 Channel4 transfer error interrupt.
    652          *                       - DMA2_IT_GL5: DMA2 Channel5 global interrupt.
    653          *                       - DMA2_IT_TC5: DMA2 Channel5 transfer complete interrupt.
    654          *                       - DMA2_IT_HT5: DMA2 Channel5 half transfer interrupt.
    655          *                       - DMA2_IT_TE5: DMA2 Channel5 transfer error interrupt.
    656          * Output         : None
    657          * Return         : None
    658          *******************************************************************************/

   \                                 In section .text, align 4, keep-with-next
    659          void DMA_ClearITPendingBit(u32 DMA_IT)
    660          {
    661            /* Check the parameters */
    662            assert_param(IS_DMA_CLEAR_IT(DMA_IT));
    663          
    664            /* Calculate the used DMA */
    665            if ((DMA_IT & FLAG_Mask) != (u32)RESET)
   \                     DMA_ClearITPendingBit:
   \   00000000   10F0805F           TST      R0,#0x10000000
   \   00000004   07BF               ITTEE    EQ 
   \   00000006   ....               LDREQ.N  R1,??DataTable8  ;; 0x40020004
   \   00000008   0860               STREQ    R0,[R1, #+0]
    666            {
    667              /* Clear the selected DMA interrupt pending bits */
    668              DMA2->IFCR = DMA_IT;
   \   0000000A   ....               LDRNE.N  R1,??DataTable9  ;; 0x40020404
   \   0000000C   0860               STRNE    R0,[R1, #+0]
    669            }
    670            else
    671            {
    672              /* Clear the selected DMA interrupt pending bits */
    673              DMA1->IFCR = DMA_IT;
    674            }
    675          }
   \   0000000E   7047               BX       LR               ;; return

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable6:
   \   00000000   00000240           DC32     0x40020000

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable7:
   \   00000000   00040240           DC32     0x40020400

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable8:
   \   00000000   04000240           DC32     0x40020004

   \                                 In section .text, align 4, keep-with-next
   \                     ??DataTable9:
   \   00000000   04040240           DC32     0x40020404
    676          
    677          /******************* (C) COPYRIGHT 2008 STMicroelectronics *****END OF FILE****/
    678          

   Maximum stack usage in bytes:

     Function               .cstack
     --------               -------
     DMA_ClearFlag               0
     DMA_ClearITPendingBit       0
     DMA_Cmd                     0
     DMA_DeInit                  0
     DMA_GetCurrDataCounter      0
     DMA_GetFlagStatus           0
     DMA_GetITStatus             0
     DMA_ITConfig                0
     DMA_Init                    0
     DMA_StructInit              0


   Section sizes:

     Function/Label         Bytes
     --------------         -----
     DMA_DeInit              188
     DMA_Init                 60
     DMA_StructInit           26
     DMA_Cmd                  20
     DMA_ITConfig             18
     DMA_GetCurrDataCounter    6
     DMA_GetFlagStatus        24
     DMA_ClearFlag            16
     DMA_GetITStatus          24
     DMA_ClearITPendingBit    16
     ??DataTable6              4
     ??DataTable7              4
     ??DataTable8              4
     ??DataTable9              4

 
 414 bytes in section .text
 
 414 bytes of CODE memory

Errors: none
Warnings: none
